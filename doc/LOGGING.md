# Логирование

## Текущее решение

В проекте используется стандартный `console.log`, `console.error`, `console.warn` для логирования.

**Решение:** Оставить текущий подход логирования.

### Преимущества текущего подхода:
- Простота - не требует дополнительных зависимостей
- Работает из коробки
- PM2 автоматически перенаправляет вывод в файлы (`logs/out.log`, `logs/error.log`)
- Структурированное логирование с префиксами для категоризации
- Достаточно для текущего масштаба проекта
- Не добавляет лишних зависимостей

### Реализованные улучшения:
- Используются префиксы для категоризации: `[Server]`, `[DB]`, `[Auth]`, `[Upload]`, `[Register]`, `[Likes]`, `[Deploy]`
- Чувствительные данные не логируются (пароли, токены, секреты)
- Используется `console.error` для ошибок, `console.warn` для предупреждений
- PM2 автоматически сохраняет логи в файлы с ротацией

## Альтернативные решения (для справки)

Если в будущем потребуется более продвинутое логирование, можно рассмотреть:

### Winston
- Мощный и гибкий
- Поддержка транспортов (файлы, консоль, базы данных)
- Ротация логов
- Форматирование (JSON, простой текст)
- Уровни логирования

### Pino
- Очень быстрый (минимальный overhead)
- Структурированные JSON логи
- Поддержка child loggers
- Хорошая интеграция с Express

**Примечание:** Для текущего проекта эти решения не требуются.

## Используемые префиксы логирования

В проекте используются следующие префиксы для категоризации логов:

- `[Server]` - общие сообщения сервера
- `[DB]` - операции с базой данных
- `[Auth]` - авторизация и аутентификация
- `[Upload]` - загрузка файлов
- `[Register]` - регистрация пользователей
- `[Likes]` - операции с лайками
- `[Import]` - импорт данных
- `[Deploy]` - деплой

**Примеры:**
```typescript
console.log('[Server] API сервер запущен на http://localhost:3001');
console.log('[DB] Запись в users.json');
console.error('[Auth] Ошибка при входе:', error);
console.warn('[Upload] Директория не существует:', path);
```

## Безопасность логирования

**Никогда не логируйте:**
- Пароли (даже хешированные)
- JWT токены
- Секретные ключи
- Полные объекты запросов с чувствительными данными

**Безопасное логирование:**
```typescript
// Плохо
console.log('Password:', password);
console.log('Token:', token);

// Хорошо
console.log('[Auth] Login attempt', { email, hasPassword: !!password });
console.log('[Auth] Token generated', { userId: user.id });
```

